# Online Snake Game

## Описание взаимодействия с программой:

1) Игрок запускает клиент, в начальном окне вводит ник
2) Открывается окно со списком комнат. Игрок выбирает одну из них
3) Открывается 3-е окно с с действующей игрой (показывается игра других игроков)
4) Пользователь нажимает на кнопку старт, на карте появляется его змейка, и он начинает управлять ею
5) Игрок проигрывает, игра на карте продолжает транслироваться, пользователь может начать заново либой выйти из комнаты.

[//]: # (## Описание взаимодействия клиента и сервера:)

[//]: # ()
[//]: # (1&#41; Client&#41; После ввода ника пользователем клиент устанавливает соединение с сервером и передает сообщение типа 0 с ником)

[//]: # (   пользователя)

[//]: # (   Server&#41; Сервер сохраняет состояние соединения, отправляет пользователю список комнат &#40;тип сообщения 1&#41; и ждет ответа)

[//]: # ()
[//]: # (2&#41; Client&#41; После выбора пользователем комнаты клиент отправляет серверу индекс выбранной комнаты &#40;тип сообщения 2&#41;)

[//]: # ()
[//]: # (3&#41; Server&#41; Сервер начинает периодически отправлять состояние игры &#40;тип сообщения 6&#41;)

[//]: # (   &#40;3-мерный массив, гдe массив 1-ого уровня хранит змеек, массивы 2-ого уровня - клетки змеек по порядку с начала,)

[//]: # (   массив 3-его уровня - координаты клетки: x, y&#41;)

[//]: # ()
[//]: # (4&#41; Client&#41; Пользователь либо начинает игру, либо выходит из комнаты. Клиент отправляет сообщение с соответствующим)

[//]: # (   типом.)

[//]: # (   Server&#41; 1&#41; Прекращает отправлять состояние игры, отправляет список комнат)

[//]: # (    2&#41; Включает пользователя в игру, и начинает ждать сообщений с действиями от пользователя)

[//]: # ()
[//]: # (5&#41; Server&#41; При проигрыше отправляет сообщение о проигрыше &#40;тип сообщения _&#41; и ждет дальнейших действий)

## Общение клиента и сервера 2-ой вариант

Во всех случаях сервер отвечает одним сообщением на одно сообщение от пользователя, если не указано обратное.

Описание вариантов:

номер варианта)  
- отправитель: тип сообщения: экземпляр класса, характеризующий параметры при данном типе сообщения.
- получатель:  тип сообщения: экземпляр класса, характеризующий параметры при данном типе сообщения.

1) 
   - Клиент: AUTHORIZATION: AuthenticationParams(nickname, false)
   - Сервер: AUTHORIZATION: AuthenticationParams(nickname, true) - если авторизация прошла успешно, AuthenticationParams(nickname, false  ) - если что-то пошло не так

2) 
   - Клиент: ROOMS_LIST: RoomsListParams()
   - Сервер: ROOMS_LIST: RoomsListParams(TransferRoom[])

3) 1)
      - Клиент: CHOSEN_ROOM: ChosenRoomParams(chosenRoomName, false) - идентификатор рабочий, может изменится
      - Сервер: CHOSEN_ROOM: ChosenRoomParams(chosenRoomName, true) - если удалось включить пользователя в игру, ChosenRoomParams(chosenRoomName, false) - если нет

   2) Сервер начинает периодически отправлять состояние комнаты
      - Сервер: ROOM_CONDITION: RoomConditionParams(TransferSnake[], TransferFruit[])

   3) 
      - Клиент: START: StartParams()
      - Сервер: START: StartParams(true) или StartParams(false)
      Сервер размещает размещает змейку клиента на поле
   4) Клиент: DIRECTION: DirectionParams(число (1 - вверх, 2 - вправо, 3 - вниз, 4 - влево))
   5) Если змейка умерла:
      - Сервер: LOSING: LosingParams()

4) 
   - Клиент: EXIT: ExitParams()
   - Сервер: ничего, просто удаляет змейку из комнаты, и прекращает слать сообщения 3.2)
   - При этом дальше клиент может запросить комнаты

5) Завершение сессии:
   - Клиент: CLOSE: CloseParams()
   - Сервер: ничего

## Протокол

protocolVersion(1 byte):messageType(1 byte):parametersLength(4 bytes):parameters(n byte)
