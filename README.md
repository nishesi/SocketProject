# Online Snake Game

## Описание взаимодействия с программой:

1) Игрок запускает клиент, в начальном окне вводит ник
2) Открывается окно со списком комнат. Игрок выбирает одну из них
3) Открывается 3-е окно с с действующей игрой (показывается игра других игроков)
4) Пользователь нажимает на кнопку старт, на карте появляется его змейка, и он начинает управлять ею
5) Игрок проигрывает, игра на карте продолжает транслироваться, пользователь может начать заново либой выйти из комнаты.

[//]: # (## Описание взаимодействия клиента и сервера:)

[//]: # ()
[//]: # (1&#41; Client&#41; После ввода ника пользователем клиент устанавливает соединение с сервером и передает сообщение типа 0 с ником)

[//]: # (   пользователя)

[//]: # (   Server&#41; Сервер сохраняет состояние соединения, отправляет пользователю список комнат &#40;тип сообщения 1&#41; и ждет ответа)

[//]: # ()
[//]: # (2&#41; Client&#41; После выбора пользователем комнаты клиент отправляет серверу индекс выбранной комнаты &#40;тип сообщения 2&#41;)

[//]: # ()
[//]: # (3&#41; Server&#41; Сервер начинает периодически отправлять состояние игры &#40;тип сообщения 6&#41;)

[//]: # (   &#40;3-мерный массив, гдe массив 1-ого уровня хранит змеек, массивы 2-ого уровня - клетки змеек по порядку с начала,)

[//]: # (   массив 3-его уровня - координаты клетки: x, y&#41;)

[//]: # ()
[//]: # (4&#41; Client&#41; Пользователь либо начинает игру, либо выходит из комнаты. Клиент отправляет сообщение с соответствующим)

[//]: # (   типом.)

[//]: # (   Server&#41; 1&#41; Прекращает отправлять состояние игры, отправляет список комнат)

[//]: # (    2&#41; Включает пользователя в игру, и начинает ждать сообщений с действиями от пользователя)

[//]: # ()
[//]: # (5&#41; Server&#41; При проигрыше отправляет сообщение о проигрыше &#40;тип сообщения _&#41; и ждет дальнейших действий)

## Общение клиента и сервера 2-ой вариант

Во всех случаях сервер отвечает одним сообщением на одно сообщение от пользователя, если не указано обратное.

Описание вариантов:

номер варианта)  
- отправитель: тип сообщения: массив параметров
- получатель:  тип сообщения: массив параметров

1) 
   - Клиент: AUTHORIZATION: {Nickname} 
   - Сервер: AUTHORIZATION: {1} - если авторизация прошла успешно, {0} - если что-то пошло не так

2) 
   - Клиент: ROOMS_LIST: {}
   - Сервер: ROOMS_LIST: {TransferRoom[]}

3) 1)
      - Клиент: CHOSEN_ROOM: {TransferRoom.name} - идентификатор рабочий, может изменится
      - Сервер: CHOSEN_ROOM: {1, параметры комнаты} - если удалось включить пользователя в игру, {0} - если нет

   2) Сервер начинает периодически отправлять состояние комнаты
      - Сервер: ROOM_CONDITION: {TransferSnake[], TransferFruit[]}

   3) 
      - Клиент: START: {}
      - Сервер: START: {1} или {0}
      Сервер размещает размещает змейку клиента на поле, но делает его прозрачным, чтобы другие змейки не могли в нее
      удариться, и через сколько то секунд запускает ее
   4) Клиент: DIRECTION: {число (0 - вверх, 1 - вправо, 2 - вниз, 3 - влево)}
   5) Если змейка умерла:
      - Сервер: LOSING: {}

4) 
   - Клиент: EXIT: {}
   - Сервер: ничего, просто удаляет змейку из комнаты, и прекращает слать сообщения 3.2)
   - При этом дальше клиент может запросить комнаты

5) Завершение сессии:
   - Клиент: CLOSE: {}
   - Сервер: ничего
6) И еще нужно впихнуть ping-pong но не будем пока с этим заморачиваться

## Технические моменты

1) С периодичностью сервер должен спрашивать у пользователя активность (ping-pong типы сообщений 8, 9)
   Если сервер через некоторое время не получил ответа, то он стирает состояние подключения и связанные с игроком данные

2) С периодичностью клиент должен спрашивать у сервера активность(ping-pong)
   Если через некоторое время сервер не отвечает, клиент выводит пользователю сообщение об утере соединения
   (авто-переподключение не гарантируется)
